# Project_X CRM
1. [Задание на разработку](#%D1%82%D0%B7) 
2. [Разработки группы](#%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D0%BA%D0%B8-%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B)
3. [Доменная модель](#%D0%B4%D0%BE%D0%BC%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F-%D0%BC%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C) 

## ТЗ 
### Вводные данные:
Имеется система CRM для телекоммуникационной компании с количеством операторов в 100 человек.
CRM состоит из:
* Клиентов (физические и юридические лица)
* Заказов (заказы на услуги, предоставляемые компанией клиенту)
* Обращений (обращения в техническую поддержку)
* Менеджера задач (Kanban-доска для отработки обращений, содержит доски, задачи, витрину с динамическими фильтрами)

### WorkFlow:
* Пользователь авторизуется в CRM
  * Профиль пользователя;
  * Уведомления пользователя.
* Пользователю доступны клиенты
  * Возможность просматривать список клиентов;
  * Возможность поиска по имени клиента;
  * Возможность редактировать клиента;
  * Возможность создавать клиента.
* Пользователю доступны заказы
  * Возможность просматривать список заказов по клиенту;
  * Возможность просматривать список заказов;
  * Возможность поиска заказа;
  * Возможность создавать заказ на клиента.
* Пользователю доступны обращения
  * Возможность просматривать обращения;
  * Возможность создавать обращение на клиента;
  * Возможность закрывать обращение.
* Пользователю доступен менеджер задач
  * Пользователю создается доска;
  * При создании обращения на доске создается задача;
  * У задачи имеется бизнес-процесс;
  * По завершению задачи, она закрывается, автоматически закрывается обращение, нотифицируется (менеджеру, клиенту).
* Имеется интеграция во внешние системы(входящая/исходящая)
Менеджер задач содержит витрину, на которой отображается информация по задачам. Применяются динамические фильтры.

Время отклика не более 1 секунды. Система должна быть отказоустойчивой (выбрать способ) и высоконагруженной (500 rps);

### Решаемые задачи:
1. Разработать доменную модель (любая нотация);
2. Выработать единую архитектуру (монолит, SOA, MSA), с описанием, почему выбран именно такой подход;
3. Подготовить оптимальное интеграционное решение;
4. Выбрать способ обеспечения отказоустойчивости и работы под нагрузкой;
5. Реализовать блок-схему\диаграмму архитектурного решения, возможно по этапам Day 0-Daу 2;
6. Выбрать Языки и Стек технологий c альтернативным решением (основная технология + альтернативная технология) с таблицей сравнительной оценки предпочтительной (из лекции 5, модуля 4, в приложении), дать оценку для 1,2-х главных технологий.
7. Оценить техническую инфраструктуру, вычислители, ОЗУ, долговременное хранилище, сеть, на период 5 лет эксплуатации.
8. Дополнительно: оценить общую трудоёмкость решения (должности в разработке и человеко/месяцы трудозатрат)

### Отчётные документы:
1. Документы должны содержать следующие диаграммы: Use Case, ERD, DFD, Sequence Diagram (общая и несколько детальных), Class Diagram, Component Diagram, Deploy Diagram, Интеграционную диаграмму, Архитектуру БД;
2. Подготовить документацию API (Swagger);
3. Результат представить в виде 2-х документов:
  * Текстовый документ формата A4 c диаграммами, таблицами и комментариями.
  * Презентация по ключевым диаграммам и идеям. 
Компоненты Клиент и Заказы являются legacy с более старым стеком. Попробовать внедрить legacy в новую архитектуру.

## Разрабоки группы
* [Заготовка к презентации](https://docs.google.com/presentation/d/1y6QWRaDwOO5-LOeqW3I-x9YwzwfJVJZlM5_qJC_9oBw/edit?usp=sharing)
* [Схемы](https://drive.google.com/file/d/167fYQh3RjtNu08GgwGgpsxvGoYCHqj8s/view?usp=sharing)

## Доменная модель
### Поддомены
####  Бизнес
* Клиент - физические или юридические лица, покупатели услуг. 
* Услуга - основной источник денежных средств в данном случае основной продукт компании
* Заказ - сущность объединяющая несколько услуг, для одного клиента
* Обращение - любой контакт клиента с системой
* Уведомление - 
* Задача - действие/действия, которые необходимо выполнить для оказания услуги клиенту
* Доска задач - список задач, которые необходимо выбрать пользователю

| Определение      | Идентификатор   | Модуль |
|:--|:--|:--|
|Клиент|Client|Clients|
|Услуга|Service|Products|
|Заказ|Order|Orders|
|Обращение|Appeal|Appeals|
|Уведомление|Notification|Notifications|
|Задача|Task|Tasks|
|Доска задач|Board|Boards|

#### Безопасность
* Пользователь - пользователь системы, 
* Полномочие - атомарное разрешение на выполнение какого-либо действия в системе;
* Роль - набор полномочий объединенных под одним именем. 

| Определение      | Идентификатор   | Модуль |
|:--|:--|:--|
|Пользователь|User|Users|
|Полномочие|Entitlement|Entitlements|
|Роль|Role|Roles|

В системе определены 3 роли: 
* Администратор - имеет полномочия на присвоение ролей оператора;
* Оператор - имеет права на операции с объектами модулей Clients, Products, Appeals, Notification, Task, TaskBoard

#### Интеграция
* Интеграционный пользователь - учётная запись от имени которой выполняются действия в сторонней системе интегрированной с Project_X
* Интеграционная роль - набор полномочий достаточный для выполнения необходимых функций в сторонней системе

#### Инфраструктура
* Источник пользователей, 
* Источник ролей, 
* Источник клиентов, 
* Источник заказов, 
* Хост - реальная или виртуальная ЭВМ на которой выполняются один или несколько компонентов системы

| Определение      | Идентификатор   |
|:--|:--|
|Источник пользователей|Users source|
|Источник ролей|Roles source|
|Источник клиентов|Clients source|
|Источник заказов|Оrders source|
|Источник обращений|Appeals source|
|Источник уведомлений|Notification source|
|Источник задач|Tasks source|


### Уточнение доменной модели 
#### Clients
По данным ТЗ клиенты поставляются из legacy-компонета. В любом случае обработка каждого клиента предполагает следующий жизненный цикл сущности: 
* Создание (create) - появление в базе данных legacy-компонета нового клиента с первоначальным заполнением данных оператором; 
* Изменение (update) - изменение собственных данных клиента. Для упрощения логики данные изменяются по всему клиенту сразу, соответственно необходима поддержка на стороне legacy-компонента;legacy-компонента;
* Удаление (delete) - удаление клиента из базы данных системы. Для этого необходима соответствущая поддержка на стороне legacy-компонента.
* Поиск (search) - полнотекстовой поиск клиента по совокупности полей.
* Получить данные (getInfo) - получение данных о клиенте по его идентификатору.
Ввиду наличия тесной связи объектоы СдПолезным будет предложить реализовать взаимодействие с источником клиентов с помощью унифицированного интерфейса, в котором можно будет заменить текущую реализацию на получение клиентов из другого источника, например из собственной БД. 
##### Операции
* Clients.create(ClientsSource cs, Client cl)
* Clients.update(ClientsSource cs, Client cl)
* Clients.delete(ClientsSource cs, long id)
* Clients.search(ClientsSource cs, List<String> fieldsNames, String criteria)
* Clients.getInfo(ClientsSource cs, long id)
	
	




Сущности и их поля (базовые):
Пользователь
	ФИО - String
	id - int
	роль - dict(role: string - id: int)


Клиент
	ФИО
	id
	Данные (паспорт, телефон)
	тип 
	

Задача
	id 
	тип
	id исполнителя
	описание
	время исполнения
	статус

Заказ
	id 
	тип
	id клиента
	id задачи
	описание
	сумма
	статус
	
